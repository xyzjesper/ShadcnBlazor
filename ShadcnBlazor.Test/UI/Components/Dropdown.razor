<CascadingValue IsFixed="true" Value="this">
    @ChildContent
</CascadingValue>

@code
{
    [Parameter] public RenderFragment ChildContent { get; set; }
    [Parameter] public bool IsOpen { get; set; } = false;
    
    public double ClientX { get; private set; }
    public double ClientY { get; private set; }

    public int ActiveItem = 0;

    public string SubmenuOutletId => $"dropdown-submenu-{GetHashCode()}";

    public async Task OnFocusItem(int item)
    {
        ActiveItem = item;
        await InvokeAsync(StateHasChanged);
    }

    public async Task OpenAsync(double clientX, double clientY)
    {
        ClientX = clientX;
        ClientY = clientY;
        
        IsOpen = true;
        await InvokeAsync(StateHasChanged);
    }

    public async Task CloseAsync()
    {
        IsOpen = false;
        await InvokeAsync(StateHasChanged);
    }
}
