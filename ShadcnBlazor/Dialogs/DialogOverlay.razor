@inherits ShadcnBase

@if (Slot != null)
{
    @Slot.Invoke(Attributes)
}
else
{
    <div @attributes="Attributes">
        @ChildContent
    </div>
}

@code
{
    [CascadingParameter] public Dialog Parent { get; set; }
    
    [Parameter] public RenderFragment ChildContent { get; set; }
    [Parameter] public RenderFragment<Dictionary<string, object?>>? Slot { get; set; }

    private Dictionary<string, object?> Attributes = new();

    protected override void OnParametersSet()
    {
        Attributes = new();

        Attributes["data-slot"] = "dialog-overlay";
        Attributes["data-state"] = Parent.IsOpen ? "open" : "closed";

        Attributes["class"] = Cn(
            "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
            ClassName
        );
        
        if(Props == null)
            return;

        foreach (var prop in Props)
            Attributes[prop.Key] = prop.Value;
    }
}